<!DOCTYPE html>
<html>
<head>
  <title>BootstrapJS Modal and HTML5 localStorage</title>
  <link rel="stylesheet" href="/css/bootstrap.1.4.0.min.css">
</head>
<body>
<h1>Bootstrap JS Modal and HTML5 localStorage</h1>

<!-- sample modal content -->
<div id="configuration" class="modal hide fade">
  <div class="modal-header">
    <a href="#" class="close">&times;</a>
    <h3>Configuration</h3>
  </div>
  <div class="modal-body">
    <p>Choose your choice.</p>
    <div id="input-list">
        <ul>
            <input class="tag" value="hoge" type="checkbox" /> hoge<br />
            <input class="tag" value="fuga" type="checkbox" /> fuga<br />
            <input class="tag" value="piyo" type="checkbox" /> piyo<br />
        </ul>
    </div>
  </div>
  <div class="modal-footer">
    <a class="btn primary">Save</a>
    <a class="btn secondary">Cancel</a>
  </div>
</div>

<button class="btn danger" data-keyboard="true" data-backdrop="true" data-controls-modal="configuration">Launch Modal</button>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script src="/js/libs/bootstrap-modal.1.4.0.min.js"></script>
<script>
$('#configuration').modal({
    keyboard: true
})

$('#configuration .primary').click(function(){
    var tags = [];
    $('#input-list').find('input:checked').each( function () {
        tags.push( $(this).val() );
    });

    localStorage.setItem('configuration', JSON.stringify(tags));
    $('#configuration').modal('hide');
    return false;
});

$('#configuration .secondary').click(function(){
    // XXX: reset checked input. (use localStorage.)
    $('#configuration').modal('hide');
});

var configuration = localStorage.getItem( "configuration" );

console.log(configuration);

</script>
</body>
</html>

